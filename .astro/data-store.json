[["Map",1,2,7,8],"meta::meta",["Map",3,4,5,6],"astro-version","4.16.18","config-digest","b10687f626f4ca63","blog",["Map",9,10],"stripe支付go-版本",{"id":9,"data":11,"body":20,"filePath":21,"assetImports":22,"digest":27,"rendered":28},{"author":12,"pubDatetime":13,"modDatetime":14,"title":15,"featured":16,"draft":16,"tags":17,"description":19},"Vanyongqi",["Date","2025-02-05T18:57:52.737Z"],["Date","2025-02-05T18:58:43.506Z"],"Stripe支付(go 版本)",false,[18],"支付方案","接入stripe支付方案,所在项目需要接入Stripe支付平台,做个调研,并提供案例demo.",">我想这应该是一个全流程的记录贴,包含我解决问题的思路与方式.\n\n因为所在项目要接入Stripe支付方案,我之前恰好做过一点paypal的支付账单的显示功能.(真该死,我也是稀里糊涂实现的,啥也不会呢)\n\n\n## 目录\n- [1. Stripe 简介](#1-stripe-简介)\n- [2. 环境准备](#2-环境准备)\n- [3. 基本概念](#3-基本概念)\n- [4. 实现步骤](#4-实现步骤)\n- [5. 代码示例](#5-代码示例)\n- [6. 注意事项](#6-注意事项)\n\n## 1. Stripe 简介\nStripe 是一个国际支付平台，支持多种支付方式和货币，提供了完整的支付解决方案。主要特点：\n- 支持信用卡、借记卡等多种支付方式\n- 支持 150+ 种货币\n- 提供完善的 API 和文档\n- 安全性高，符合 PCI DSS 标准\n- 支持订阅付费模式\n- 提供详细的交易报告和分析\n\n## 2. 环境准备\n\n### 2.1 Stripe支付环境准备\n1. 访问 [Stripe官网](https://stripe.com) 注册账户\n个人账户设置改成中文\n![Stripe注册界面](../../assets/images/Stripe支付(go%20版本)/image.png)\n\n2. 获取 API 密钥（测试环境和生产环境各有一套）\n   - Publishable key: 用于前端\n   - Secret key: 用于后端进行验证\n![Stripe注册界面](../../assets/images/Stripe支付(go%20版本)/pubkey.png)\n\n3. 设置产品的价格ID\n- 创建对应产品的价格\n![Stripe产品界面](../../assets/images/Stripe支付(go%20版本)/imagePrice.png)\n- 创建完后,记录所设置产品的ID\n![Stripe产品界面](../../assets/images/Stripe支付(go%20版本)/imagePriceId.png)\n\n### 2.2 Stripe支付Demo\n**核心逻辑**\n- 创建一个env环境变量,用于存储stripe支付的密钥以及对应的产品价格信息\n- 创建一个前端页面,用于展示编辑数量,模拟请求和跳转的路径\n- 创建一个后端服务,用于处理前端页面的请求(核心)\n    1. 设置重定向页面\n    2. 获取重定向的链接\n    3. 配置 Webhook\n\n        - 登录 Stripe Dashboard\n        - 在 Developers → Webhooks 中添加 endpoint\n        - 设置 endpoint URL 为： 你的域名/webhook\n        - 选择要监听的事件（至少需要 checkout.session.completed\n\n**demo项目文件结构**\n```bash\n.\n├── go.mod\n├── go.sum\n├── public\n│   ├── index.html\n│   └── success.html\n└── server.go\n2 directories, 6 files\n ```\n**.env**\n```bash\nSTRIPE_SECRET_KEY=sk_test_51Qhqkz02n8o7RJg7So5y5Y4HtVJHdRfS24nYEiKegOT3NFD8RQsVaI6YfsmJoVvM0qd2ukGjpKVs6XkhPNehX0pG00WNqWL8GI\nSTRIPE_PUBLISHABLE_KEY=pk_test_51Qhqkz02n8o7RJg7AVwaQIyGLUkDwWpFktBM6mEI4wGVKefNmVLNFGzotS636l0wPbjxVrYngl2CjLgmExkYtEyw00nwbvYyYo\nPRICE=price_1QiBmF02n8o7RJg7H3uitU7v\nDOMAIN=http://localhost:4242\nSTATIC_DIR=./public\n```\n**server.go**\n```go\npackage main\n\nimport (\n\t\"bytes\"\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"io\"\n\t\"io/ioutil\"\n\t\"log\"\n\t\"net/http\"\n\t\"os\"\n\t\"strconv\"\n\n\t\"github.com/joho/godotenv\"\n\t\"github.com/stripe/stripe-go/v72\"\n\t\"github.com/stripe/stripe-go/v72/checkout/session\"\n\t\"github.com/stripe/stripe-go/v72/price\"\n\t\"github.com/stripe/stripe-go/v72/webhook\"\n)\n\nfunc main() {\n\terr := godotenv.Load()\n\tif err != nil {\n\t\tlog.Fatal(\"Error loading .env file\")\n\t}\n\tcheckEnv()\n\n\tstripe.Key = os.Getenv(\"STRIPE_SECRET_KEY\")\n\n\t// For sample support and debugging, not required for production:\n    // 用于调试 生产环境不需要设置\n\tstripe.SetAppInfo(&stripe.AppInfo{\n\t\tName:    \"stripe-samples/checkout-one-time-payments\",\n\t\tVersion: \"0.0.1\",\n\t\tURL:     \"https://github.com/stripe-samples/checkout-one-time-payments\",\n\t})\n   // 路由配置\n\thttp.Handle(\"/\", http.FileServer(http.Dir(os.Getenv(\"STATIC_DIR\")))) // 进入默认的index.html页面\n\n\thttp.HandleFunc(\"/config\", handleConfig) //配置信息\n\thttp.HandleFunc(\"/checkout-session\", handleCheckoutSession) // 根据会话 ID 获取支付会话信息\n\thttp.HandleFunc(\"/create-checkout-session\", handleCreateCheckoutSession) //创建新的支付会话 \n\thttp.HandleFunc(\"/webhook\", handleWebhook) // 处理 Stripe 的 Webhook 回调\n\n\tlog.Println(\"server running at 0.0.0.0:4242\")\n\thttp.ListenAndServe(\"0.0.0.0:4242\", nil)\n}\n\n// ErrorResponseMessage represents the structure of the error\n// object sent in failed responses.\ntype ErrorResponseMessage struct {\n\tMessage string `json:\"message\"`\n}\n\n// ErrorResponse represents the structure of the error object sent\n// in failed responses.\ntype ErrorResponse struct {\n\tError *ErrorResponseMessage `json:\"error\"`\n}\n\nfunc handleConfig(w http.ResponseWriter, r *http.Request) {\n\tif r.Method != \"GET\" {\n\t\thttp.Error(w, http.StatusText(http.StatusMethodNotAllowed), http.StatusMethodNotAllowed)\n\t\treturn\n\t}\n\t// Fetch a price, use it's unit amount and currency\n\tp, _ := price.Get(\n\t\tos.Getenv(\"PRICE\"),\n\t\tnil,\n\t)\n\twriteJSON(w, struct {\n\t\tPublicKey  string `json:\"publicKey\"`\n\t\tUnitAmount int64  `json:\"unitAmount\"`\n\t\tCurrency   string `json:\"currency\"`\n\t}{\n\t\tPublicKey:  os.Getenv(\"STRIPE_PUBLISHABLE_KEY\"),\n\t\tUnitAmount: p.UnitAmount,\n\t\tCurrency:   string(p.Currency),\n\t})\n}\n\nfunc handleCheckoutSession(w http.ResponseWriter, r *http.Request) {\n\tif r.Method != \"GET\" {\n\t\thttp.Error(w, http.StatusText(http.StatusMethodNotAllowed), http.StatusMethodNotAllowed)\n\t\treturn\n\t}\n\tsessionID := r.URL.Query().Get(\"sessionId\")\n\ts, _ := session.Get(sessionID, nil)\n\twriteJSON(w, s)\n}\n\nfunc handleCreateCheckoutSession(w http.ResponseWriter, r *http.Request) {\n\t// 1. 解析购买数量\n\tr.ParseForm()\n\tquantity, err := strconv.ParseInt(r.PostFormValue(\"quantity\")[0:], 10, 64)\n\tif err != nil {\n\t\thttp.Error(w, fmt.Sprintf(\"error parsing quantity %v\", err.Error()), http.StatusInternalServerError)\n\t\treturn\n\t}\n\n\t// 2. 获取域名用于构建回调 URL\n\tdomainURL := os.Getenv(\"DOMAIN\")\n\n\t// 3. 创建 Stripe 结账会话\n\tparams := &stripe.CheckoutSessionParams{\n\t\t// 支付成功后跳转的 URL\n\t\tSuccessURL: stripe.String(domainURL + \"/success.html?session_id={CHECKOUT_SESSION_ID}\"),\n\t\t// 取消支付后跳转的 URL\n\t\tCancelURL: stripe.String(domainURL + \"/canceled.html\"),\n\t\t// 设置支付模式\n\t\tMode: stripe.String(string(stripe.CheckoutSessionModePayment)),\n\t\t// 设置商品信息\n\t\tLineItems: []*stripe.CheckoutSessionLineItemParams{\n\t\t\t{\n\t\t\t\tQuantity: stripe.Int64(quantity),            // 购买数量\n\t\t\t\tPrice:    stripe.String(os.Getenv(\"PRICE\")), // 商品价格 ID\n\t\t\t},\n\t\t},\n\t}\n\n\t// 4. 调用 Stripe API 创建会话\n\ts, err := session.New(params)\n\tif err != nil {\n\t\thttp.Error(w, fmt.Sprintf(\"error while creating session %v\", err.Error()), http.StatusInternalServerError)\n\t\treturn\n\t}\n\n\t// 5. 记录重定向 URL\n\tlog.Printf(\"Redirecting to: %s\", s.URL)\n\n\t// 6. 重定向用户到 Stripe 支付页面\n\thttp.Redirect(w, r, s.URL, http.StatusSeeOther)\n}\n\nfunc handleWebhook(w http.ResponseWriter, r *http.Request) {\n\tif r.Method != \"POST\" {\n\t\thttp.Error(w, http.StatusText(http.StatusMethodNotAllowed), http.StatusMethodNotAllowed)\n\t\treturn\n\t}\n\tb, err := ioutil.ReadAll(r.Body)\n\tif err != nil {\n\t\thttp.Error(w, err.Error(), http.StatusBadRequest)\n\t\tlog.Printf(\"ioutil.ReadAll: %v\", err)\n\t\treturn\n\t}\n\n\t// Verify the webhook signature\n\tevent, err := webhook.ConstructEvent(b, r.Header.Get(\"Stripe-Signature\"), os.Getenv(\"STRIPE_WEBHOOK_SECRET\"))\n\tif err != nil {\n\t\thttp.Error(w, err.Error(), http.StatusBadRequest)\n\t\tlog.Printf(\"webhook.ConstructEvent: %v\", err)\n\t\treturn\n\t}\n\n\t// Handle the event\n\tswitch event.Type {\n\tcase \"checkout.session.completed\":\n\t\tvar session stripe.CheckoutSession\n\t\tif err := json.Unmarshal(event.Data.Raw, &session); err != nil {\n\t\t\tlog.Printf(\"Error parsing checkout session: %v\\n\", err)\n\t\t\thttp.Error(w, \"Failed to parse session\", http.StatusBadRequest)\n\t\t\treturn\n\t\t}\n\t\tlog.Printf(\"Payment succeeded for session ID: %s\\n\", session.ID)\n\t\t// Here you can update your database or trigger other actions\n\t}\n\n\twriteJSON(w, nil)\n}\n\nfunc writeJSON(w http.ResponseWriter, v interface{}) {\n\tvar buf bytes.Buffer\n\tif err := json.NewEncoder(&buf).Encode(v); err != nil {\n\t\thttp.Error(w, err.Error(), http.StatusInternalServerError)\n\t\tlog.Printf(\"json.NewEncoder.Encode: %v\", err)\n\t\treturn\n\t}\n\tw.Header().Set(\"Content-Type\", \"application/json\")\n\tif _, err := io.Copy(w, &buf); err != nil {\n\t\tlog.Printf(\"io.Copy: %v\", err)\n\t\treturn\n\t}\n}\n\nfunc writeJSONError(w http.ResponseWriter, v interface{}, code int) {\n\tw.WriteHeader(code)\n\twriteJSON(w, v)\n\treturn\n}\n\nfunc writeJSONErrorMessage(w http.ResponseWriter, message string, code int) {\n\tresp := &ErrorResponse{\n\t\tError: &ErrorResponseMessage{\n\t\t\tMessage: message,\n\t\t},\n\t}\n\twriteJSONError(w, resp, code)\n}\n\nfunc checkEnv() {\n\tprice := os.Getenv(\"PRICE\")\n\tif price == \"price_12345\" || price == \"\" {\n\t\tlog.Fatal(\"You must set a Price ID from your Stripe account. See the README for instructions.\")\n\t}\n}\n\n```\n\n**index.html**\n```html\n\u003C!DOCTYPE html>\n\u003Chtml lang=\"en\">\n\u003Chead>\n    \u003Cmeta charset=\"UTF-8\">\n    \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    \u003Ctitle>Stripe Checkout Demo\u003C/title>\n    \u003Cstyle>\n        body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 0;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 100vh;\n            background-color: #f5f5f5;\n        }\n        .container {\n            background: white;\n            padding: 2rem;\n            border-radius: 8px;\n            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n            text-align: center;\n        }\n        h1 {\n            margin-bottom: 1rem;\n            font-size: 1.5rem;\n            color: #333;\n        }\n        input {\n            width: 100%;\n            padding: 0.5rem;\n            margin: 0.5rem 0;\n            font-size: 1rem;\n            border: 1px solid #ccc;\n            border-radius: 4px;\n        }\n        button {\n            background-color: #6772e5;\n            color: white;\n            border: none;\n            padding: 0.75rem 1.5rem;\n            font-size: 1rem;\n            border-radius: 4px;\n            cursor: pointer;\n            margin-top: 1rem;\n        }\n        button:hover {\n            background-color: #5469d4;\n        }\n    \u003C/style>\n\u003C/head>\n\u003Cbody>\n    \u003Cdiv class=\"container\">\n        \u003Ch1>Stripe Checkout Demo\u003C/h1>\n        \u003Cp>Enter the quantity you'd like to purchase:\u003C/p>\n        \u003Cinput type=\"number\" id=\"quantity\" value=\"1\" min=\"1\">\n        \u003Cbutton id=\"checkout-button\">Checkout\u003C/button>\n    \u003C/div>\n\n    \u003Cscript>\n        document.getElementById('checkout-button').addEventListener('click', async () => {\n            const quantity = document.getElementById('quantity').value;\n            console.log(\"Quantity:\", quantity);\n\n            try {\n                // 创建表单并提交\n                const form = document.createElement('form');\n                form.method = 'POST';\n                form.action = '/create-checkout-session';\n                \n                const quantityInput = document.createElement('input');\n                quantityInput.type = 'hidden';\n                quantityInput.name = 'quantity';\n                quantityInput.value = quantity;\n                \n                form.appendChild(quantityInput);\n                document.body.appendChild(form);\n                form.submit();\n                \n            } catch (error) {\n                console.error(\"Error:\", error);\n                alert(\"发生错误，请重试。\");\n            }\n        });\n    \u003C/script>\n\u003C/body>\n\u003C/html>\n```\n**success.html**\n```html\n\u003C!DOCTYPE html>\n\u003Chtml lang=\"en\">\n\u003Chead>\n    \u003Cmeta charset=\"UTF-8\">\n    \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    \u003Ctitle>Payment Successful\u003C/title>\n\u003C/head>\n\u003Cbody>\n    \u003Ch1>Payment Successful!\u003C/h1>\n    \u003Cp>Thank you for your purchase.\u003C/p>\n    \u003Cp>Session ID: \u003Cspan id=\"session-id\">\u003C/span>\u003C/p>\n\n    \u003Cscript>\n        // 从 URL 中获取 session_id\n        const urlParams = new URLSearchParams(window.location.search);\n        const sessionId = urlParams.get('session_id');\n        document.getElementById('session-id').textContent = sessionId;\n    \u003C/script>\n\u003C/body>\n\u003C/html>\n```\n\n## 3. 基本概念\n### 3.1 Payment Intent\n- 支付意图，表示一次支付尝试\n- 包含支付金额、货币、支付方式等信息\n- 可以追踪支付状态\n### 3.2 Customer\n- 客户对象，代表您的用户\n- 可以保存支付方式，便于重复支付\n- 支持查看交易历史\n### 3.3 Payment Method\n- 支付方式，如信用卡、支付宝等\n- 可以与 Customer 关联\n- 支持多种支付渠道\n### 3.4 Webhook\n- 用于接收 Stripe 的事件通知\n- 处理异步支付结果\n- 确保支付状态同步\n## 4. 实现步骤\n### 4.1 初始化配置\n1. 设置 API 密钥\n2. 配置 Webhook 接收地址\n3. 设置货币和支付方式\n### 4.2 创建支付流程\n1. 创建 Customer（可选）\n2. 创建 Payment Intent\n3. 确认支付\n4. 处理支付结果\n### 4.3 处理 Webhook\n1. 验证 Webhook 签名\n2. 处理支付成功事件\n3. 处理支付失败事件\n4. 更新订单状态\n## 5. 代码示例\n### 5.1 初始化 Stripe\n```go\npackage payment\n\nimport (\n    \"github.com/stripe/stripe-go/v72\"\n    \"os\"\n)\n\nfunc init() {\n    // 设置 API 密钥\n    stripe.Key = os.Getenv(\"STRIPE_SECRET_KEY\")\n}\n ```\n\n### 5.2 创建支付意图\n```go\npackage payment\n\nimport (\n    \"github.com/stripe/stripe-go/v72\"\n    \"github.com/stripe/stripe-go/v72/paymentintent\"\n)\n\nfunc CreatePaymentIntent(amount int64, currency string) (*stripe.PaymentIntent, error) {\n    params := &stripe.PaymentIntentParams{\n        Amount:   stripe.Int64(amount),\n        Currency: stripe.String(currency),\n        PaymentMethodTypes: []*string{\n            stripe.String(\"card\"),\n            stripe.String(\"alipay\"),\n        },\n    }\n\n    return paymentintent.New(params)\n}\n ```\n\n\n### 5.3 创建客户\n```go\npackage payment\n\nimport (\n    \"github.com/stripe/stripe-go/v72\"\n    \"github.com/stripe/stripe-go/v72/customer\"\n)\n\nfunc CreateCustomer(email, name string) (*stripe.Customer, error) {\n    params := &stripe.CustomerParams{\n        Email: stripe.String(email),\n        Name:  stripe.String(name),\n    }\n\n    return customer.New(params)\n}\n ```\n\n\n### 5.4 处理 Webhook\n```go\npackage payment\n\nimport (\n    \"github.com/stripe/stripe-go/v72/webhook\"\n    \"net/http\"\n)\n\nfunc HandleWebhook(w http.ResponseWriter, req *http.Request) {\n    const webhookSecret = \"whsec_xxx\" // 从环境变量获取\n\n    // 读取请求体\n    payload, err := io.ReadAll(req.Body)\n    if err != nil {\n        http.Error(w, err.Error(), http.StatusBadRequest)\n        return\n    }\n\n    // 验证签名\n    event, err := webhook.ConstructEvent(payload, req.Header.Get(\"Stripe-Signature\"), webhookSecret)\n    if err != nil {\n        http.Error(w, err.Error(), http.StatusBadRequest)\n        return\n    }\n\n    // 处理事件\n    switch event.Type {\n    case \"payment_intent.succeeded\":\n        handlePaymentSuccess(event.Data.Object)\n    case \"payment_intent.payment_failed\":\n        handlePaymentFailure(event.Data.Object)\n    default:\n        // 处理其他事件\n    }\n\n    w.WriteHeader(http.StatusOK)\n}\n ```\n\n\n### 5.5 完整支付流程示例\n```go\npackage payment\n\nimport (\n    \"github.com/stripe/stripe-go/v72\"\n    \"github.com/gin-gonic/gin\"\n)\n\ntype PaymentRequest struct {\n    Amount   int64  `json:\"amount\"`\n    Currency string `json:\"currency\"`\n    Email    string `json:\"email\"`\n}\n\nfunc ProcessPayment(c *gin.Context) {\n    var req PaymentRequest\n    if err := c.BindJSON(&req); err != nil {\n        c.JSON(400, gin.H{\"error\": err.Error()})\n        return\n    }\n\n    // 1. 创建或获取客户\n    customer, err := CreateCustomer(req.Email, \"\")\n    if err != nil {\n        c.JSON(500, gin.H{\"error\": err.Error()})\n        return\n    }\n\n    // 2. 创建支付意图\n    params := &stripe.PaymentIntentParams{\n        Amount:   stripe.Int64(req.Amount),\n        Currency: stripe.String(req.Currency),\n        Customer: stripe.String(customer.ID),\n        AutomaticPaymentMethods: &stripe.PaymentIntentAutomaticPaymentMethodsParams{\n            Enabled: stripe.Bool(true),\n        },\n    }\n\n    pi, err := CreatePaymentIntent(req.Amount, req.Currency)\n    if err != nil {\n        c.JSON(500, gin.H{\"error\": err.Error()})\n        return\n    }\n\n    // 3. 返回客户端所需信息\n    c.JSON(200, gin.H{\n        \"clientSecret\": pi.ClientSecret,\n        \"customerId\":   customer.ID,\n    })\n}\n ```\n\n## 6. 注意事项\n### 6.1 安全性\n- 永远不要在前端暴露 Secret Key\n- 使用 HTTPS 进行通信\n- 验证所有 Webhook 签名\n- 实现请求速率限制\n### 6.2 错误处理\n- 妥善处理支付失败情况\n- 实现重试机制\n- 记录详细的错误日志\n- 设置监控告警\n### 6.3 测试\n- 使用测试模式进行开发\n- 使用测试卡号进行测试\n- 模拟各种支付场景\n- 测试 Webhook 处理\n### 6.4 生产环境\n- 使用环境变量管理密钥\n- 实现完整的日志系统\n- 做好数据备份\n- 监控系统状态\n### 6.5 合规性\n- 遵守 PCI DSS 标准\n- 保护用户隐私\n- 遵守当地支付法规\n- 实现退款机制\n\n> 昨天看了对象公司要求看的一本书《请给我结果》,还蛮有收获.所谓知易行难,就是理论指导的局限性与实际操作的复杂性之间的矛盾.\n按照书中所说,我决定将这个任务拆分成事前、事中、事后,三个步骤进行归档记录.\n## 一、事前 分析问题,决定的事情就不要改变\n要实现Stripe的支付接入FOFA,今天的目标就是接入进测试环境(结果提前).\n拆分成三件事:\n- 验证Stripe的demo\n- 接入FOFA的项目代码中\n- 进入开发环境进行实际功能验证\n\n三件事都完成就说明我今天的任务完成了.\n\n## 二、事中 解决问题,记录自己的处理流程\n任务1的主逻辑:\n1. 注册Stripe账户,这是因为stripe支付需要获取对应的KEY,包括公钥、私钥、以及商品的价格ID\n2. 掌握Stripe的支付流程,创建支付步骤需要如下操作\n - 设置回调的URL地址 \n - 设置支付成功or失败的回调地址以及商品的购买数量与商品价格ID.\n - 调用Stripe API创建支付会话等待返回的重定向URL\n - 跳转到重定向URL进行支付\n - 支付成功or失败后 返回对应的处理(这个时候应该纳入数据记账,并发放对应的支付订单)\n任务二的主逻辑:\n参考paypal的支付代码进行实践\n\n任务三的主逻辑:\n与前端联动调试\n## 三、 事后 总结,复盘,总结\nto write.","src/content/blog/Stripe支付(go 版本).md",[23,24,25,26],"../../assets/images/Stripe支付(go 版本)/image.png","../../assets/images/Stripe支付(go 版本)/pubkey.png","../../assets/images/Stripe支付(go 版本)/imagePrice.png","../../assets/images/Stripe支付(go 版本)/imagePriceId.png","1aaee8c738d02d44",{"html":29,"metadata":30},"\u003Cblockquote>\n\u003Cp>我想这应该是一个全流程的记录贴,包含我解决问题的思路与方式.\u003C/p>\n\u003C/blockquote>\n\u003Cp>因为所在项目要接入Stripe支付方案,我之前恰好做过一点paypal的支付账单的显示功能.(真该死,我也是稀里糊涂实现的,啥也不会呢)\u003C/p>\n\u003Ch2 id=\"目录\">目录\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"#1-stripe-%E7%AE%80%E4%BB%8B\">1. Stripe 简介\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#2-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87\">2. 环境准备\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#3-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\">3. 基本概念\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#4-%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4\">4. 实现步骤\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#5-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B\">5. 代码示例\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#6-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\">6. 注意事项\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"1-stripe-简介\">1. Stripe 简介\u003C/h2>\n\u003Cp>Stripe 是一个国际支付平台，支持多种支付方式和货币，提供了完整的支付解决方案。主要特点：\u003C/p>\n\u003Cul>\n\u003Cli>支持信用卡、借记卡等多种支付方式\u003C/li>\n\u003Cli>支持 150+ 种货币\u003C/li>\n\u003Cli>提供完善的 API 和文档\u003C/li>\n\u003Cli>安全性高，符合 PCI DSS 标准\u003C/li>\n\u003Cli>支持订阅付费模式\u003C/li>\n\u003Cli>提供详细的交易报告和分析\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"2-环境准备\">2. 环境准备\u003C/h2>\n\u003Ch3 id=\"21-stripe支付环境准备\">2.1 Stripe支付环境准备\u003C/h3>\n\u003Col>\n\u003Cli>\n\u003Cp>访问 \u003Ca href=\"https://stripe.com\">Stripe官网\u003C/a> 注册账户\n个人账户设置改成中文\n\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;../../assets/images/Stripe支付(go 版本)/image.png&#x22;,&#x22;alt&#x22;:&#x22;Stripe注册界面&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>获取 API 密钥（测试环境和生产环境各有一套）\u003C/p>\n\u003Cul>\n\u003Cli>Publishable key: 用于前端\u003C/li>\n\u003Cli>Secret key: 用于后端进行验证\n\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;../../assets/images/Stripe支付(go 版本)/pubkey.png&#x22;,&#x22;alt&#x22;:&#x22;Stripe注册界面&#x22;,&#x22;index&#x22;:0}\">\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\n\u003Cp>设置产品的价格ID\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003Cul>\n\u003Cli>创建对应产品的价格\n\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;../../assets/images/Stripe支付(go 版本)/imagePrice.png&#x22;,&#x22;alt&#x22;:&#x22;Stripe产品界面&#x22;,&#x22;index&#x22;:0}\">\u003C/li>\n\u003Cli>创建完后,记录所设置产品的ID\n\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;../../assets/images/Stripe支付(go 版本)/imagePriceId.png&#x22;,&#x22;alt&#x22;:&#x22;Stripe产品界面&#x22;,&#x22;index&#x22;:0}\">\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"22-stripe支付demo\">2.2 Stripe支付Demo\u003C/h3>\n\u003Cp>\u003Cstrong>核心逻辑\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>创建一个env环境变量,用于存储stripe支付的密钥以及对应的产品价格信息\u003C/li>\n\u003Cli>创建一个前端页面,用于展示编辑数量,模拟请求和跳转的路径\u003C/li>\n\u003Cli>创建一个后端服务,用于处理前端页面的请求(核心)\n\u003Col>\n\u003Cli>\n\u003Cp>设置重定向页面\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>获取重定向的链接\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>配置 Webhook\u003C/p>\n\u003Cul>\n\u003Cli>登录 Stripe Dashboard\u003C/li>\n\u003Cli>在 Developers → Webhooks 中添加 endpoint\u003C/li>\n\u003Cli>设置 endpoint URL 为： 你的域名/webhook\u003C/li>\n\u003Cli>选择要监听的事件（至少需要 checkout.session.completed\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ol>\n\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>demo项目文件结构\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes min-light night-owl\" style=\"background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\">.\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">├──\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\"> go.mod\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">├──\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\"> go.sum\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">├──\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\"> public\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">│\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\">   ├──\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\"> index.html\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">│\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\">   └──\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\"> success.html\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">└──\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\"> server.go\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">2\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\"> directories,\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 6\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\"> files\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cstrong>.env\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes min-light night-owl\" style=\"background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">STRIPE_SECRET_KEY\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\">sk_test_51Qhqkz02n8o7RJg7So5y5Y4HtVJHdRfS24nYEiKegOT3NFD8RQsVaI6YfsmJoVvM0qd2ukGjpKVs6XkhPNehX0pG00WNqWL8GI\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">STRIPE_PUBLISHABLE_KEY\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\">pk_test_51Qhqkz02n8o7RJg7AVwaQIyGLUkDwWpFktBM6mEI4wGVKefNmVLNFGzotS636l0wPbjxVrYngl2CjLgmExkYtEyw00nwbvYyYo\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">PRICE\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\">price_1QiBmF02n8o7RJg7H3uitU7v\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">DOMAIN\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\">http://localhost:4242\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">STATIC_DIR\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#2B5581;--shiki-dark:#ECC48D\">./public\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cstrong>server.go\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes min-light night-owl\" style=\"background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"go\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">package\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> main\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">import\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> (\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">bytes\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">encoding/json\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">fmt\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">io\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">io/ioutil\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">log\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">net/http\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">os\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">strconv\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/joho/godotenv\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/stripe/stripe-go/v72\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/stripe/stripe-go/v72/checkout/session\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/stripe/stripe-go/v72/price\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\t\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/stripe/stripe-go/v72/webhook\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> main\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\terr\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> godotenv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Load\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\tlog\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Fatal\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">Error loading .env file\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">\tcheckEnv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tstripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Key\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> os\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Getenv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">STRIPE_SECRET_KEY\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t// For sample support and debugging, not required for production:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">    // 用于调试 生产环境不需要设置\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tstripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">SetAppInfo\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">&#x26;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">AppInfo\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tName\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:    \u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">stripe-samples/checkout-one-time-payments\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tVersion\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">0.0.1\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tURL\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:     \u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">https://github.com/stripe-samples/checkout-one-time-payments\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">   // 路由配置\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Handle\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">FileServer\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Dir\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">os\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Getenv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">STATIC_DIR\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)))) \u003C/span>\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">// 进入默认的index.html页面\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">HandleFunc\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">/config\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">handleConfig\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) \u003C/span>\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">//配置信息\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">HandleFunc\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">/checkout-session\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">handleCheckoutSession\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) \u003C/span>\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">// 根据会话 ID 获取支付会话信息\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">HandleFunc\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">/create-checkout-session\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">handleCreateCheckoutSession\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) \u003C/span>\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">//创建新的支付会话 \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">HandleFunc\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">/webhook\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">handleWebhook\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) \u003C/span>\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">// 处理 Stripe 的 Webhook 回调\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tlog\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Println\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">server running at 0.0.0.0:4242\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">ListenAndServe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">0.0.0.0:4242\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">// ErrorResponseMessage represents the structure of the error\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">// object sent in failed responses.\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">type\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> ErrorResponseMessage\u003C/span>\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\"> struct\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\tMessage\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> string\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> `\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">json:\"message\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">// ErrorResponse represents the structure of the error object sent\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">// in failed responses.\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">type\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> ErrorResponse\u003C/span>\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\"> struct\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\tError\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> *\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">ErrorResponseMessage\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> `\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">json:\"error\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> handleConfig\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">w\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">ResponseWriter\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">r\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> *\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">Request\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> r\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Method\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">GET\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">StatusText\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusMethodNotAllowed\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">), \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusMethodNotAllowed\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\t\treturn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t// Fetch a price, use it's unit amount and currency\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">_\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> price\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Get\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\tos\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Getenv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">PRICE\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">\t\tnil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">\twriteJSON\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">struct\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tPublicKey\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">  string\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> `\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">json:\"publicKey\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tUnitAmount\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> int64\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">  `\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">json:\"unitAmount\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tCurrency\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">   string\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> `\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">json:\"currency\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tPublicKey\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:  \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">os\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Getenv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">STRIPE_PUBLISHABLE_KEY\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tUnitAmount\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">p\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">UnitAmount\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tCurrency\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:   \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">string\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">p\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Currency\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> handleCheckoutSession\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">w\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">ResponseWriter\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">r\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> *\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">Request\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> r\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Method\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">GET\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">StatusText\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusMethodNotAllowed\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">), \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusMethodNotAllowed\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\t\treturn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tsessionID\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> r\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">URL\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Query\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">().\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Get\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">sessionId\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\ts\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">_\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> session\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Get\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">sessionID\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">\twriteJSON\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">s\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> handleCreateCheckoutSession\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">w\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">ResponseWriter\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">r\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> *\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">Request\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t// 1. 解析购买数量\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tr\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">ParseForm\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tquantity\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> strconv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">ParseInt\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">r\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">PostFormValue\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">quantity\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)[\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\">0\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:], \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\">10\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\">64\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">fmt\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Sprintf\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">error parsing quantity \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">%v\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">()), \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusInternalServerError\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\t\treturn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t// 2. 获取域名用于构建回调 URL\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tdomainURL\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> os\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Getenv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">DOMAIN\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t// 3. 创建 Stripe 结账会话\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tparams\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> &#x26;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">CheckoutSessionParams\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t\t// 支付成功后跳转的 URL\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tSuccessURL\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">String\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">domainURL\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> +\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">/success.html?session_id={CHECKOUT_SESSION_ID}\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t\t// 取消支付后跳转的 URL\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tCancelURL\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">String\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">domainURL\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> +\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">/canceled.html\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t\t// 设置支付模式\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tMode\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">String\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">string\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">CheckoutSessionModePayment\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t\t// 设置商品信息\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tLineItems\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: []\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">*\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">CheckoutSessionLineItemParams\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t\t\t{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\t\t\tQuantity\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Int64\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">quantity\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),            \u003C/span>\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">// 购买数量\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\t\t\tPrice\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:    \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">String\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">os\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Getenv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">PRICE\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)), \u003C/span>\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">// 商品价格 ID\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t\t\t},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t\t},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t// 4. 调用 Stripe API 创建会话\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\ts\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> session\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">New\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">params\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">fmt\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Sprintf\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">error while creating session \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">%v\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">()), \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusInternalServerError\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\t\treturn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t// 5. 记录重定向 URL\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tlog\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Printf\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">Redirecting to: \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">%s\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">s\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">URL\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t// 6. 重定向用户到 Stripe 支付页面\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Redirect\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">r\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">s\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">URL\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusSeeOther\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> handleWebhook\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">w\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">ResponseWriter\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">r\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> *\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">Request\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> r\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Method\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">POST\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">StatusText\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusMethodNotAllowed\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">), \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusMethodNotAllowed\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\t\treturn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tb\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> ioutil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">ReadAll\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">r\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Body\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(), \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusBadRequest\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\tlog\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Printf\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">ioutil.ReadAll: \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">%v\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\t\treturn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t// Verify the webhook signature\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tevent\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> webhook\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">ConstructEvent\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">b\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">r\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Header\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Get\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">Stripe-Signature\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">), \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">os\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Getenv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">STRIPE_WEBHOOK_SECRET\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(), \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusBadRequest\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\tlog\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Printf\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">webhook.ConstructEvent: \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">%v\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\t\treturn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t// Handle the event\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tswitch\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> event\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Type\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tcase\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">checkout.session.completed\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\t\tvar\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> session\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">CheckoutSession\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\t\tif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> json\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Unmarshal\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">event\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Data\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Raw\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">&#x26;\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">session\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">); \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\t\tlog\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Printf\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">Error parsing checkout session: \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">%v\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#F78C6C\">\\n\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\t\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">Failed to parse session\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusBadRequest\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\t\t\treturn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\tlog\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Printf\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">Payment succeeded for session ID: \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">%s\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#F78C6C\">\\n\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">session\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">ID\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">\t\t// Here you can update your database or trigger other actions\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">\twriteJSON\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> writeJSON\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">w\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">ResponseWriter\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">v\u003C/span>\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\"> interface\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{}) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tvar\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> buf\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> bytes\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">Buffer\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> json\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">NewEncoder\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">&#x26;\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">buf\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">).\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Encode\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">v\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">); \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\thttp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(), \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusInternalServerError\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\tlog\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Printf\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">json.NewEncoder.Encode: \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">%v\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\t\treturn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tw\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Header\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">().\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Set\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">Content-Type\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">application/json\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> _\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> io\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Copy\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">&#x26;\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">buf\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">); \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\tlog\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Printf\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">io.Copy: \u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">%v\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\t\treturn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> writeJSONError\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">w\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">ResponseWriter\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">v\u003C/span>\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\"> interface\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{}, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">code\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> int\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tw\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">WriteHeader\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">code\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">\twriteJSON\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">v\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\treturn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> writeJSONErrorMessage\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">w\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">ResponseWriter\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">message\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> string\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">code\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> int\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tresp\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> &#x26;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">ErrorResponse\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\tError\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">&#x26;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">ErrorResponseMessage\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">\t\t\tMessage\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">message\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t\t},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">\twriteJSONError\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">resp\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">code\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> checkEnv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\tprice\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> os\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Getenv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">PRICE\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">\tif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> price\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> ==\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">price_12345\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> ||\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> price\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> ==\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> \"\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">\t\tlog\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Fatal\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">You must set a Price ID from your Stripe account. See the README for instructions.\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cstrong>index.html\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes min-light night-owl\" style=\"background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"html\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;!\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">DOCTYPE\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> html\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">html\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> lang\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">en\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">head\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">meta\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> charset\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">UTF-8\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">meta\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> name\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">viewport\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> content\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">width=device-width, initial-scale=1.0\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">title\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">Stripe Checkout Demo\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">title\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">style\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#FF6363\">        body\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            font-family\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\"> Arial\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\"> sans-serif\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            margin\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            padding\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            display\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF6363\"> flex\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            justify-content\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF6363\"> center\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            align-items\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF6363\"> center\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            height\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 100\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">vh\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            background-color\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> #\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FFEB95\">f5f5f5\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;--shiki-dark:#C5E478\">        .\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\">container\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            background\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\"> white\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            padding\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 2\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">rem\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            border-radius\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 8\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">px\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            box-shadow\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 4\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">px\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 8\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">px\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#C5E478\"> rgba\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\">0\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0.1\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\">)\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            text-align\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF6363\"> center\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#FF6363\">        h1\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            margin-bottom\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">rem\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            font-size\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1.5\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">rem\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            color\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> #\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FFEB95\">333\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#FF6363\">        input\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            width\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 100\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">%\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            padding\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0.5\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">rem\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            margin\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0.5\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">rem\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            font-size\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">rem\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            border\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">px\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF6363\"> solid\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> #\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FFEB95\">ccc\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            border-radius\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 4\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">px\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#FF6363\">        button\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            background-color\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> #\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FFEB95\">6772e5\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            color\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\"> white\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            border\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF6363\"> none\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            padding\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0.75\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">rem\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1.5\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">rem\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            font-size\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">rem\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            border-radius\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 4\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">px\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            cursor\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF6363\"> pointer\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            margin-top\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#FFEB95\">rem\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#FF6363\">        button\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#C5E478\">:\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\">hover\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#80CBC4\">            background-color\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#D6DEEB\">:\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> #\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FFEB95\">5469d4\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">style\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">head\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">body\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">div\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> class\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">container\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">        &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">h1\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">Stripe Checkout Demo\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">h1\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">        &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">p\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">Enter the quantity you'd like to purchase:\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">p\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">        &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">input\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> type\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">number\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> id\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">quantity\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> value\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">1\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> min\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">1\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">        &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">button\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> id\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">checkout-button\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">Checkout\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">button\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">div\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">script\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">        document\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">getElementById\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">checkout-button\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">addEventListener\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">click\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\"> async\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D9F5DD\"> ()\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =>\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">            const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> quantity\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\"> document\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">getElementById\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">quantity\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic\">value\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">            console\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">log\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">Quantity:\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\"> quantity\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">            try\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">                // 创建表单并提交\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">                const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> form\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\"> document\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">createElement\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">form\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">                form\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">method\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> '\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">POST\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">                form\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">action\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> '\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">/create-checkout-session\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">                \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">                const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> quantityInput\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\"> document\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">createElement\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">input\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">                quantityInput\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">type\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> '\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">hidden\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">                quantityInput\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">name\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> '\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">quantity\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">                quantityInput\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">value\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\"> quantity\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">                \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">                form\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">appendChild\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">quantityInput\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">                document\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#FAF39F;--shiki-dark-font-style:italic\">body\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">appendChild\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">form\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">                form\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">submit\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">                \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">            } \u003C/span>\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">catch\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> (\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">                console\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">Error:\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\"> error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">                alert\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">发生错误，请重试。\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">            }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">script\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">body\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">html\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cstrong>success.html\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes min-light night-owl\" style=\"background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"html\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;!\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">DOCTYPE\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> html\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">html\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> lang\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">en\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">head\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">meta\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> charset\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">UTF-8\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">meta\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> name\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">viewport\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> content\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">width=device-width, initial-scale=1.0\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">title\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">Payment Successful\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">title\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">head\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">body\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">h1\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">Payment Successful!\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">h1\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">p\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">Thank you for your purchase.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">p\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">p\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">Session ID: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">span\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic\"> id\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">=\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">session-id\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">span\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">p\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">script\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">        // 从 URL 中获取 session_id\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">        const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> urlParams\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> URLSearchParams\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">window\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#FAF39F;--shiki-dark-font-style:italic\">location\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic\">search\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">        const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> sessionId\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\"> urlParams\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">get\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">session_id\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\">        document\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">getElementById\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">session-id\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">'\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">textContent\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\"> sessionId\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">script\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">body\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#CAECE6\">html\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#7FDBCA\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"3-基本概念\">3. 基本概念\u003C/h2>\n\u003Ch3 id=\"31-payment-intent\">3.1 Payment Intent\u003C/h3>\n\u003Cul>\n\u003Cli>支付意图，表示一次支付尝试\u003C/li>\n\u003Cli>包含支付金额、货币、支付方式等信息\u003C/li>\n\u003Cli>可以追踪支付状态\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"32-customer\">3.2 Customer\u003C/h3>\n\u003Cul>\n\u003Cli>客户对象，代表您的用户\u003C/li>\n\u003Cli>可以保存支付方式，便于重复支付\u003C/li>\n\u003Cli>支持查看交易历史\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"33-payment-method\">3.3 Payment Method\u003C/h3>\n\u003Cul>\n\u003Cli>支付方式，如信用卡、支付宝等\u003C/li>\n\u003Cli>可以与 Customer 关联\u003C/li>\n\u003Cli>支持多种支付渠道\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"34-webhook\">3.4 Webhook\u003C/h3>\n\u003Cul>\n\u003Cli>用于接收 Stripe 的事件通知\u003C/li>\n\u003Cli>处理异步支付结果\u003C/li>\n\u003Cli>确保支付状态同步\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"4-实现步骤\">4. 实现步骤\u003C/h2>\n\u003Ch3 id=\"41-初始化配置\">4.1 初始化配置\u003C/h3>\n\u003Col>\n\u003Cli>设置 API 密钥\u003C/li>\n\u003Cli>配置 Webhook 接收地址\u003C/li>\n\u003Cli>设置货币和支付方式\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"42-创建支付流程\">4.2 创建支付流程\u003C/h3>\n\u003Col>\n\u003Cli>创建 Customer（可选）\u003C/li>\n\u003Cli>创建 Payment Intent\u003C/li>\n\u003Cli>确认支付\u003C/li>\n\u003Cli>处理支付结果\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"43-处理-webhook\">4.3 处理 Webhook\u003C/h3>\n\u003Col>\n\u003Cli>验证 Webhook 签名\u003C/li>\n\u003Cli>处理支付成功事件\u003C/li>\n\u003Cli>处理支付失败事件\u003C/li>\n\u003Cli>更新订单状态\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"5-代码示例\">5. 代码示例\u003C/h2>\n\u003Ch3 id=\"51-初始化-stripe\">5.1 初始化 Stripe\u003C/h3>\n\u003Cpre class=\"astro-code astro-code-themes min-light night-owl\" style=\"background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"go\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">package\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> payment\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">import\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> (\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">    \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/stripe/stripe-go/v72\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">    \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">os\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> init\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">    // 设置 API 密钥\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">    stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Key\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> os\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Getenv\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">STRIPE_SECRET_KEY\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"52-创建支付意图\">5.2 创建支付意图\u003C/h3>\n\u003Cpre class=\"astro-code astro-code-themes min-light night-owl\" style=\"background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"go\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">package\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> payment\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">import\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> (\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">    \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/stripe/stripe-go/v72\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">    \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/stripe/stripe-go/v72/paymentintent\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> CreatePaymentIntent\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">amount\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> int64\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">currency\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> string\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) (\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">*\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">PaymentIntent\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">    params\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> &#x26;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">PaymentIntentParams\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">        Amount\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:   \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Int64\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">amount\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">        Currency\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">String\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">currency\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">        PaymentMethodTypes\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: []\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">*\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">string\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">            stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">String\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">card\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">            stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">String\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">alipay\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    return\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> paymentintent\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">New\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">params\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"53-创建客户\">5.3 创建客户\u003C/h3>\n\u003Cpre class=\"astro-code astro-code-themes min-light night-owl\" style=\"background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"go\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">package\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> payment\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">import\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> (\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">    \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/stripe/stripe-go/v72\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">    \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/stripe/stripe-go/v72/customer\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> CreateCustomer\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">email\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">name\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> string\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) (\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">*\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">Customer\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">    params\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> &#x26;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">CustomerParams\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">        Email\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">String\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">email\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">        Name\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:  \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">String\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">name\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    return\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> customer\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">New\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">params\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"54-处理-webhook\">5.4 处理 Webhook\u003C/h3>\n\u003Cpre class=\"astro-code astro-code-themes min-light night-owl\" style=\"background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"go\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">package\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> payment\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">import\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> (\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">    \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/stripe/stripe-go/v72/webhook\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">    \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">net/http\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> HandleWebhook\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">w\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">ResponseWriter\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">req\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> *\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">Request\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    const\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#82AAFF\"> webhookSecret\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">whsec_xxx\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\"> // 从环境变量获取\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">    // 读取请求体\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">    payload\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> io\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">ReadAll\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">req\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Body\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    if\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">        http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(), \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusBadRequest\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">        return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">    // 验证签名\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">    event\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> webhook\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">ConstructEvent\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">payload\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">req\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Header\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Get\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">Stripe-Signature\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">), \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">webhookSecret\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    if\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">        http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(), \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusBadRequest\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">        return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">    // 处理事件\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    switch\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> event\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Type\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    case\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">payment_intent.succeeded\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">        handlePaymentSuccess\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">event\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Data\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Object\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    case\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">payment_intent.payment_failed\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">        handlePaymentFailure\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">event\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Data\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Object\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    default\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">        // 处理其他事件\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">    w\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">WriteHeader\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">http\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">StatusOK\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"55-完整支付流程示例\">5.5 完整支付流程示例\u003C/h3>\n\u003Cpre class=\"astro-code astro-code-themes min-light night-owl\" style=\"background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"go\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">package\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> payment\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">import\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> (\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">    \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/stripe/stripe-go/v72\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">    \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">github.com/gin-gonic/gin\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">type\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> PaymentRequest\u003C/span>\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\"> struct\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">    Amount\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">   int64\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">  `\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">json:\"amount\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">    Currency\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> string\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> `\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">json:\"currency\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">    Email\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    string\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\"> `\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">json:\"email\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">func\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> ProcessPayment\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D7DBE0\">c\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> *\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">gin\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">Context\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    var\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> req\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\"> PaymentRequest\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    if\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> c\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">BindJSON\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">&#x26;\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">req\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">); \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">        c\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">JSON\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\">400\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">gin\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">H\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">error\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">()})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">        return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">    // 1. 创建或获取客户\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">    customer\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> CreateCustomer\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">req\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Email\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    if\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">        c\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">JSON\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\">500\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">gin\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">H\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">error\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">()})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">        return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">    // 2. 创建支付意图\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">    params\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> &#x26;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">PaymentIntentParams\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">        Amount\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:   \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Int64\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">req\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Amount\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">        Currency\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">String\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">req\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Currency\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">        Customer\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">String\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">customer\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">ID\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">        AutomaticPaymentMethods\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">&#x26;\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">PaymentIntentAutomaticPaymentMethodsParams\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">            Enabled\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">stripe\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Bool\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\">true\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">    pi\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> :=\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> CreatePaymentIntent\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">req\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Amount\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">req\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">Currency\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    if\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\"> err\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#FF5874\"> nil\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">        c\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">JSON\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\">500\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">gin\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">H\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">error\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">err\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">Error\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">()})\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">        return\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C2C3C5;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic\">    // 3. 返回客户端所需信息\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">    c\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">JSON\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\">200\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">, \u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">gin\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#D6DEEB\">H\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">        \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">clientSecret\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">: \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">pi\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">ClientSecret\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">        \"\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#ECC48D\">customerId\u003C/span>\u003Cspan style=\"color:#22863A;--shiki-dark:#D9F5DD\">\"\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">:   \u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">customer\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">ID\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    })\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"6-注意事项\">6. 注意事项\u003C/h2>\n\u003Ch3 id=\"61-安全性\">6.1 安全性\u003C/h3>\n\u003Cul>\n\u003Cli>永远不要在前端暴露 Secret Key\u003C/li>\n\u003Cli>使用 HTTPS 进行通信\u003C/li>\n\u003Cli>验证所有 Webhook 签名\u003C/li>\n\u003Cli>实现请求速率限制\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"62-错误处理\">6.2 错误处理\u003C/h3>\n\u003Cul>\n\u003Cli>妥善处理支付失败情况\u003C/li>\n\u003Cli>实现重试机制\u003C/li>\n\u003Cli>记录详细的错误日志\u003C/li>\n\u003Cli>设置监控告警\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"63-测试\">6.3 测试\u003C/h3>\n\u003Cul>\n\u003Cli>使用测试模式进行开发\u003C/li>\n\u003Cli>使用测试卡号进行测试\u003C/li>\n\u003Cli>模拟各种支付场景\u003C/li>\n\u003Cli>测试 Webhook 处理\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"64-生产环境\">6.4 生产环境\u003C/h3>\n\u003Cul>\n\u003Cli>使用环境变量管理密钥\u003C/li>\n\u003Cli>实现完整的日志系统\u003C/li>\n\u003Cli>做好数据备份\u003C/li>\n\u003Cli>监控系统状态\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"65-合规性\">6.5 合规性\u003C/h3>\n\u003Cul>\n\u003Cli>遵守 PCI DSS 标准\u003C/li>\n\u003Cli>保护用户隐私\u003C/li>\n\u003Cli>遵守当地支付法规\u003C/li>\n\u003Cli>实现退款机制\u003C/li>\n\u003C/ul>\n\u003Cblockquote>\n\u003Cp>昨天看了对象公司要求看的一本书《请给我结果》,还蛮有收获.所谓知易行难,就是理论指导的局限性与实际操作的复杂性之间的矛盾.\n按照书中所说,我决定将这个任务拆分成事前、事中、事后,三个步骤进行归档记录.\u003C/p>\n\u003C/blockquote>\n\u003Ch2 id=\"一事前-分析问题决定的事情就不要改变\">一、事前 分析问题,决定的事情就不要改变\u003C/h2>\n\u003Cp>要实现Stripe的支付接入FOFA,今天的目标就是接入进测试环境(结果提前).\n拆分成三件事:\u003C/p>\n\u003Cul>\n\u003Cli>验证Stripe的demo\u003C/li>\n\u003Cli>接入FOFA的项目代码中\u003C/li>\n\u003Cli>进入开发环境进行实际功能验证\u003C/li>\n\u003C/ul>\n\u003Cp>三件事都完成就说明我今天的任务完成了.\u003C/p>\n\u003Ch2 id=\"二事中-解决问题记录自己的处理流程\">二、事中 解决问题,记录自己的处理流程\u003C/h2>\n\u003Cp>任务1的主逻辑:\u003C/p>\n\u003Col>\n\u003Cli>注册Stripe账户,这是因为stripe支付需要获取对应的KEY,包括公钥、私钥、以及商品的价格ID\u003C/li>\n\u003Cli>掌握Stripe的支付流程,创建支付步骤需要如下操作\u003C/li>\n\u003C/ol>\n\u003Cul>\n\u003Cli>设置回调的URL地址\u003C/li>\n\u003Cli>设置支付成功or失败的回调地址以及商品的购买数量与商品价格ID.\u003C/li>\n\u003Cli>调用Stripe API创建支付会话等待返回的重定向URL\u003C/li>\n\u003Cli>跳转到重定向URL进行支付\u003C/li>\n\u003Cli>支付成功or失败后 返回对应的处理(这个时候应该纳入数据记账,并发放对应的支付订单)\n任务二的主逻辑:\n参考paypal的支付代码进行实践\u003C/li>\n\u003C/ul>\n\u003Cp>任务三的主逻辑:\n与前端联动调试\u003C/p>\n\u003Ch2 id=\"三-事后-总结复盘总结\">三、 事后 总结,复盘,总结\u003C/h2>\n\u003Cp>to write.\u003C/p>",{"headings":31,"imagePaths":120,"frontmatter":11},[32,35,38,41,45,48,51,54,57,60,63,66,69,72,75,78,81,84,87,90,93,96,99,102,105,108,111,114,117],{"depth":33,"slug":34,"text":34},2,"目录",{"depth":33,"slug":36,"text":37},"1-stripe-简介","1. Stripe 简介",{"depth":33,"slug":39,"text":40},"2-环境准备","2. 环境准备",{"depth":42,"slug":43,"text":44},3,"21-stripe支付环境准备","2.1 Stripe支付环境准备",{"depth":42,"slug":46,"text":47},"22-stripe支付demo","2.2 Stripe支付Demo",{"depth":33,"slug":49,"text":50},"3-基本概念","3. 基本概念",{"depth":42,"slug":52,"text":53},"31-payment-intent","3.1 Payment Intent",{"depth":42,"slug":55,"text":56},"32-customer","3.2 Customer",{"depth":42,"slug":58,"text":59},"33-payment-method","3.3 Payment Method",{"depth":42,"slug":61,"text":62},"34-webhook","3.4 Webhook",{"depth":33,"slug":64,"text":65},"4-实现步骤","4. 实现步骤",{"depth":42,"slug":67,"text":68},"41-初始化配置","4.1 初始化配置",{"depth":42,"slug":70,"text":71},"42-创建支付流程","4.2 创建支付流程",{"depth":42,"slug":73,"text":74},"43-处理-webhook","4.3 处理 Webhook",{"depth":33,"slug":76,"text":77},"5-代码示例","5. 代码示例",{"depth":42,"slug":79,"text":80},"51-初始化-stripe","5.1 初始化 Stripe",{"depth":42,"slug":82,"text":83},"52-创建支付意图","5.2 创建支付意图",{"depth":42,"slug":85,"text":86},"53-创建客户","5.3 创建客户",{"depth":42,"slug":88,"text":89},"54-处理-webhook","5.4 处理 Webhook",{"depth":42,"slug":91,"text":92},"55-完整支付流程示例","5.5 完整支付流程示例",{"depth":33,"slug":94,"text":95},"6-注意事项","6. 注意事项",{"depth":42,"slug":97,"text":98},"61-安全性","6.1 安全性",{"depth":42,"slug":100,"text":101},"62-错误处理","6.2 错误处理",{"depth":42,"slug":103,"text":104},"63-测试","6.3 测试",{"depth":42,"slug":106,"text":107},"64-生产环境","6.4 生产环境",{"depth":42,"slug":109,"text":110},"65-合规性","6.5 合规性",{"depth":33,"slug":112,"text":113},"一事前-分析问题决定的事情就不要改变","一、事前 分析问题,决定的事情就不要改变",{"depth":33,"slug":115,"text":116},"二事中-解决问题记录自己的处理流程","二、事中 解决问题,记录自己的处理流程",{"depth":33,"slug":118,"text":119},"三-事后-总结复盘总结","三、 事后 总结,复盘,总结",[23,24,25,26]]